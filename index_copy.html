<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>arduino.js: JavaScript-to-Arduino I/O control interface</title>

<!-- core library -->
<script src="script/arduino.js"></script>

<!-- demo app, you can remove this.. -->
<script src="demo/demo.js"></script>

<link rel="stylesheet" media="screen" href="style.css" />
<link rel="stylesheet" media="screen" href="demo/demo.css" />

<!-- Flot material here -->
	<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="../excanvas.min.js"></script><![endif]-->
	<script language="javascript" type="text/javascript" src="flot/jquery.js"></script>
	<script language="javascript" type="text/javascript" src="flot/jquery.flot.js"></script>

<script>

// arduino.js: crash-course intro (config/setup for your own use)

// specify where to find the flash (used for socket connection and control protocol)
arduino.config.flash.url = 'swf/arduinojs.swf';

// enable debugging to JS console (useful when prototyping)
//arduino.config.debug.enabled = true;

// include flash-based debug console messages
//arduino.config.flash.debug = true;

// true = show flash UI on-screen (good for initial set-up / troubleshooting)
arduino.config.flash.showUI = false;

// fallback: allow fake connections if socket fails, for testing offline etc.
arduino.config.debug.offlineMode = true;

// finally, connect when flash has loaded.
// demo.js sets its own handlers, but here is a basic example:


/* 
arduino.onload = function() {

  arduino.connect('127.0.0.1', 5331, function() {
    // yay, we are now connected and ready to go.

	    
  });

};
*/

function doStuff() {

    function readData() {

  	console.log('Pin 13 value: ' + arduino.getDigitalData(13));
  	console.log('Analog input 0 value: ' + arduino.getAnalogData(1));
  	var stuff = arduino.getAnalogData(1);
  	var a=0;
	
	}
	
	setInterval(readData, 100);

}



</script>




</head>

<body>
<div id="header">
	<div class="wrapper"> 
<div id="logo"> </div> <h1>Arduino Grapher </h1>
<h4 id="tagline"> Create real-time visualizations from your Arduino </h4>
	</div> <!-- ends .wrapper -->	
</div>

<div id="headermenu">
	<div class="wrapper"> 	
		<ul>
			<li><a href="">Home</a></li>
			<li><a href="" class="active">Graph it!</a></li>
			<li><a href="">Help & Tutorials</a></li>
			<li><a href="">Credits</a></li>
		</ul>
	</div> <!-- ends .wrapper -->
</div>


<div id="content">
	<div class="wrapper"> 



    <h3>Line Chart</h3>

    <div id="placeholder" style="width:600px;height:300px;"></div>

    <p>This chart automatically shows the data from your Arduino when it connects. If you can't see any changes please check our Help and Troubleshooting page.</p>

    <p>Time between updates: <input id="updateInterval" type="text" value="" style="text-align: right; width:5em"> milliseconds</p>

<script type="text/javascript">
$(function () {
    // we use an inline data source in the example, usually data would
    // be fetched from a server
    var data = [], totalPoints = 50;
    function getRandomData() {
        if (data.length > 0)
            data = data.slice(1);

        // do a random walk
        while (data.length < totalPoints) {
            //var prev = data.length > 0 ? data[data.length - 1] : 50;
            //var y = prev + Math.random() * 10 - 5;
            //if (y < 0)
            //    y = 0;
            //if (y > 100)
            //    y = 100;
            var y = arduino.getAnalogData(1);
            data.push(1000-y);
        }

        // zip the generated y values with the x values
        var res = [];
        for (var i = 0; i < data.length; ++i)
            res.push([i, data[i]])
        return res;
    }

    // setup control widget
    var updateInterval = 1;
    $("#updateInterval").val(updateInterval).change(function () {
        var v = $(this).val();
        if (v && !isNaN(+v)) {
            updateInterval = +v;
            if (updateInterval < 1)
                updateInterval = 1;
            if (updateInterval > 2000)
                updateInterval = 2000;
            $(this).val("" + updateInterval);
        }
    });

    // setup plot
    var options = {
        series: { shadowSize: 0 }, // drawing is faster without shadows
        yaxis: { min: 0, max: 1000 },
        xaxis: { show: false }
    };
    var plot = $.plot($("#placeholder"), [ getRandomData() ], options);

    function update() {
        plot.setData([ getRandomData() ]);
        // since the axes don't change, we don't need to call plot.setupGrid()
        plot.draw();
        
        setTimeout(update, updateInterval);
    }

    update();
});
</script>

 <h3>Connect to Arduino</h3>
 <p>Once you have set up your Arduino to work with your computer's serial port click on the button below to start getting data from your Arduino pins. If you need assistance on this step please see our help page.</p>

 <div id="device-status">
  <p id="device-status-text"><button id="do-connect" onclick="startArduinoDemo()" title="Attempt to connect to an arduino device via socks/serial proxy" disabled="disabled">Connect</button></p>
 </div>
 
 <div id="pins" class="column-wrapper">

 <h3>Check connection with a blink test</h3>
 <p>To test if this website has connection to your Arduino connect an LED light to PIN 13 (with ground going into the pin right next to it with the label GND</p>
<p>Pin 13 typically has a surface-mount LED (eg. as with the Uno) representing binary output.</p>
<p>Interval (msec): &nbsp;<input id="blink-interval" type="text" value="1000" style="width:5em" /></p>


 <h3>Write to Arduino</h3>
 <p>As well as reading from Arduino you can write to their pins and switch values (for instance you can turn on and off an LED Light connected to one of the pins). Try with the buttons below</p>

   <ul>
    <li>Pin 2 <span id="pin2-value"> </span> <span id="pin2-button"></span></li>
    <li>Pin 3 <span id="pin3-value"> </span> <span id="pin3-button"></span></li>
    <li>Pin 4 <span id="pin4-value"> </span> <span id="pin4-button"></span></li>
    <li>Pin 5 <span id="pin5-value"> </span> <span id="pin5-button"></span></li>
    <li>Pin 6 <span id="pin6-value"> </span> <span id="pin6-button"></span></li>
    <li>Pin 7 <span id="pin7-value"> </span> <span id="pin7-button"></span></li>
    <li>Pin 8 <span id="pin8-value"> </span> <span id="pin8-button"></span></li>
    <li>Pin 9 <span id="pin9-value"> </span> <span id="pin9-button"></span></li>
    <li>Pin 10 <span id="pin10-value"> </span> <span id="pin10-button"></span></li>
    <li>Pin 11 <span id="pin11-value"> </span> <span id="pin11-button"></span></li>
    <li>Pin 12 <span id="pin12-value"> </span> <span id="pin12-button"></span></li>
    <li>Pin 13 <span id="pin13-value"> </span> <span id="pin13-button"></span></li>
   </ul>  


	</div>
 </div>
</div>
<div id="footer">
<div class="wrapper">
	<p> A project of Curry School of Education, University of Virginia</p>
</div>
</div>


</body>
</html>